'use client'
import { createRef, useEffect } from 'react';
import styles from './styles/Home.module.css'

async function getData() {
  const dynamicData = await fetch(`https://jsonplaceholder.typicode.com/users`, { cache: 'no-store' });
  const data = await dynamicData.json();

  return data;
}

export default function Home() {
  const detectRef = createRef();
  
  useEffect(() => {
    const geocodeSearchString = async (locationSearchString) => {
      const geocodeReq = fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${locationSearchString}.json?types=place&access_token=pk.eyJ1IjoiaXRzaXNhYWMxOSIsImEiOiJja2xiMmpraTEwZDIyMndvMzE5cGd1eTlyIn0.V2gQnHEAqZEugJKp82pUaQ`)
      const geocodeData = await geocodeReq.json();

      console.log(geocodeData)
    }

    const detectLocation = async () => {
      const success = (pos) => {
        const crd = pos.coords;
      
        console.log("Your current position is:");
        console.log(`Latitude : ${crd.latitude}`);
        console.log(`Longitude: ${crd.longitude}`);
        console.log(`More or less ${crd.accuracy} meters.`);
      }

      const error = (err) => {
        console.warn(`ERROR(${err.code}): ${err.message}`);
      }

      navigator.geolocation.getCurrentPosition(success, error, {
        enableHighAccuracy: true,
        timeout: 5000,
        maximumAge: 0,
      });
    }

    detectRef.current.addEventListener('click', detectLocation)
  })

  return (
    <div className={styles['hero-content']}>
      <div className={styles['hero-letters']}>
        <svg className={styles.letters} width="188" height="1063" viewBox="0 0 188 1063" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M90 906V774H188V789.492H105.715V830.833H188V846.325H105.715V890.508H188V906H90Z" fill="#CCC5B9"/>
          <path d="M90 435V303H188V318.492H105.715V359.833H188V375.325H105.715V419.508H188V435H90Z" fill="#CCC5B9"/>
          <path d="M90 749L90 627C90 621.477 94.4771 617 100 617L178 617C183.523 617 188 621.477 188 627V749H174.093V632.127L103.907 632.127V690.564V749H90ZM103.907 704.244V689.387L174.093 689.387V704.244L103.907 704.244Z" fill="#403D39"/>
          <path d="M90 278L90 156C90 150.477 94.4771 146 100 146L178 146C183.523 146 188 150.477 188 156V278H174.093V161.127L103.907 161.127V219.564V278H90ZM103.907 233.244V218.387L174.093 218.387V233.244L103.907 233.244Z" fill="#403D39"/>
          <path d="M90 592V460H140.236C141.472 460 142.944 460.061 144.65 460.183C146.357 460.244 148.005 460.428 149.595 460.733C156.481 461.833 162.249 464.278 166.899 468.067C171.608 471.856 175.139 476.653 177.494 482.458C179.848 488.203 181.025 494.589 181.025 501.617C181.025 511.822 178.465 520.683 173.344 528.2C168.223 535.656 160.719 540.331 150.831 542.225L144.827 543.233H105.715V592H90ZM169.989 592L140.589 538.283L156.128 533.333L188 592H169.989ZM105.715 527.742H139.706C140.825 527.742 142.09 527.681 143.503 527.558C144.974 527.436 146.357 527.222 147.652 526.917C151.713 525.939 155.01 524.167 157.541 521.6C160.13 518.972 162.014 515.917 163.191 512.433C164.368 508.889 164.957 505.283 164.957 501.617C164.957 497.95 164.368 494.375 163.191 490.892C162.014 487.347 160.13 484.261 157.541 481.633C155.01 479.006 151.713 477.233 147.652 476.317C146.357 475.95 144.974 475.736 143.503 475.675C142.09 475.553 140.825 475.492 139.706 475.492H105.715V527.742Z" fill="#CCC5B9"/>
          <path d="M90 1063V931H140.236C141.472 931 142.944 931.061 144.65 931.183C146.357 931.244 148.005 931.428 149.595 931.733C156.481 932.833 162.249 935.278 166.899 939.067C171.608 942.856 175.139 947.653 177.494 953.458C179.848 959.203 181.025 965.589 181.025 972.617C181.025 982.822 178.465 991.683 173.344 999.2C168.223 1006.66 160.719 1011.33 150.831 1013.22L144.827 1014.23H105.715V1063H90ZM169.989 1063L140.589 1009.28L156.128 1004.33L188 1063H169.989ZM105.715 998.742H139.706C140.825 998.742 142.09 998.681 143.503 998.558C144.974 998.436 146.357 998.222 147.652 997.917C151.713 996.939 155.01 995.167 157.541 992.6C160.13 989.972 162.014 986.917 163.191 983.433C164.368 979.889 164.957 976.283 164.957 972.617C164.957 968.95 164.368 965.375 163.191 961.892C162.014 958.347 160.13 955.261 157.541 952.633C155.01 950.006 151.713 948.233 147.652 947.317C146.357 946.95 144.974 946.736 143.503 946.675C142.09 946.553 140.825 946.492 139.706 946.492H105.715V998.742Z" fill="#CCC5B9"/>
          <path d="M90 121V-11H140.236C141.472 -11 142.944 -10.9389 144.65 -10.8167C146.357 -10.7556 148.005 -10.5722 149.595 -10.2667C156.481 -9.16666 162.249 -6.72222 166.899 -2.93334C171.608 0.855552 175.139 5.65278 177.494 11.4583C179.848 17.2028 181.025 23.5889 181.025 30.6167C181.025 40.8222 178.465 49.6833 173.344 57.2C168.223 64.6556 160.719 69.3306 150.831 71.225L144.827 72.2333H105.715V121H90ZM169.989 121L140.589 67.2833L156.128 62.3333L188 121H169.989ZM105.715 56.7417H139.706C140.825 56.7417 142.09 56.6806 143.503 56.5583C144.974 56.4361 146.357 56.2222 147.652 55.9167C151.713 54.9389 155.01 53.1667 157.541 50.6C160.13 47.9722 162.014 44.9167 163.191 41.4333C164.368 37.8889 164.957 34.2833 164.957 30.6167C164.957 26.95 164.368 23.375 163.191 19.8917C162.014 16.3472 160.13 13.2611 157.541 10.6333C155.01 8.00555 151.713 6.23333 147.652 5.31666C146.357 4.95 144.974 4.73611 143.503 4.675C142.09 4.55278 140.825 4.49167 139.706 4.49167H105.715V56.7417Z" fill="#CCC5B9"/>
          <path d="M12.8053 592C2.57466 592 -4.07209 589.81 -11.9135 585.614C-19.755 581.418 -25.9117 575.549 -30.3838 568.008C-34.7946 560.406 -37 551.497 -37 541.28L-36.9999 460.091L-20.4593 460L-20.4595 539.912C-20.4595 546.115 -19.418 551.527 -17.3351 556.149C-15.191 560.71 -12.373 564.511 -8.8811 567.552C-5.38921 570.593 -1.56038 572.873 2.60539 574.394C6.83241 575.853 8.63953 576.674 12.8053 576.674C17.0323 576.674 21.2593 575.914 25.4864 574.394C29.7134 572.873 33.5422 570.623 36.9728 567.643C40.4647 564.602 43.2521 560.771 45.335 556.149C47.4179 551.527 48.4593 546.145 48.4593 540.003L48.4595 460.091H65L64.9999 541.371C64.9999 551.527 62.7638 560.406 58.2918 568.008C53.8809 575.61 47.7548 581.509 39.9134 585.705C32.0719 589.902 23.0359 592 12.8053 592Z" fill="#403D39"/>
          <path d="M12.8053 1063C2.57466 1063 -4.07209 1060.81 -11.9135 1056.61C-19.755 1052.42 -25.9117 1046.55 -30.3838 1039.01C-34.7946 1031.41 -37 1022.5 -37 1012.28L-36.9999 931.091L-20.4593 931L-20.4595 1010.91C-20.4595 1017.11 -19.418 1022.53 -17.3351 1027.15C-15.191 1031.71 -12.373 1035.51 -8.8811 1038.55C-5.38921 1041.59 -1.56038 1043.87 2.60539 1045.39C6.83241 1046.85 8.63953 1047.67 12.8053 1047.67C17.0323 1047.67 21.2593 1046.91 25.4864 1045.39C29.7134 1043.87 33.5422 1041.62 36.9728 1038.64C40.4647 1035.6 43.2521 1031.77 45.335 1027.15C47.4179 1022.53 48.4593 1017.15 48.4593 1011L48.4595 931.091H65L64.9999 1012.37C64.9999 1022.53 62.7638 1031.41 58.2918 1039.01C53.8809 1046.61 47.7548 1052.51 39.9134 1056.71C32.0719 1060.9 23.0359 1063 12.8053 1063Z" fill="#403D39"/>
          <path d="M12.8053 121C2.57466 121 -4.07209 118.81 -11.9135 114.614C-19.755 110.418 -25.9117 104.549 -30.3838 97.0082C-34.7946 89.4063 -37 80.4968 -37 70.2799L-36.9999 -10.9088L-20.4593 -11L-20.4595 68.9115C-20.4595 75.1147 -19.418 80.5272 -17.3351 85.1492C-15.191 89.7103 -12.373 93.5113 -8.8811 96.552C-5.38921 99.5928 -1.56038 101.873 2.60539 103.394C6.83241 104.853 8.63953 105.674 12.8053 105.674C17.0323 105.674 21.2593 104.914 25.4864 103.394C29.7134 101.873 33.5422 99.6232 36.9728 96.6432C40.4647 93.6025 43.2521 89.7711 45.335 85.1491C47.4179 80.5272 48.4593 75.145 48.4593 69.0027L48.4595 -10.9088H65L64.9999 70.371C64.9999 80.5272 62.7638 89.4062 58.2918 97.0081C53.8809 104.61 47.7548 110.509 39.9134 114.705C32.0719 118.902 23.0359 121 12.8053 121Z" fill="#403D39"/>
          <path d="M-37 906L-37 774H-23.5813L51.5813 883.084V774H65V906H51.5813L-23.5813 800.182V906H-37Z" fill="#403D39"/>
          <path d="M-37 435L-37 303H-23.5813L51.5813 412.084V303H65V435H51.5813L-23.5813 329.182V435H-37Z" fill="#403D39"/>
          <path d="M-37 749V617H26.2992C34.1488 617 40.8423 618.619 46.3797 621.858C51.9779 625.097 56.2374 629.375 59.1582 634.692C62.1399 639.947 63.6307 645.631 63.6307 651.742C63.6307 658.892 61.8052 665.156 58.1542 670.533C54.5032 675.911 49.5743 679.608 43.3676 681.625L43.1851 677.133C51.6432 679.394 53.2864 683.55 57.9718 689.6C62.6573 695.65 65 702.861 65 711.233C65 718.933 63.4179 725.594 60.2537 731.217C57.1503 736.839 52.6474 741.208 46.745 744.325C40.8425 747.442 38.8951 749 30.8629 749H-37ZM-20.5705 733.417H27.7596C32.6276 733.417 36.9784 732.531 40.8119 730.758C44.6455 728.925 47.6575 726.358 49.8481 723.058C52.0996 719.758 53.2253 715.786 53.2253 711.142C53.2253 706.681 52.2213 702.678 50.2133 699.133C48.266 695.589 45.4974 692.778 41.9072 690.7C38.3779 688.561 34.2705 687.492 29.5851 687.492H-20.5705V733.417ZM-20.5705 672.092H26.1166C30.011 672.092 33.5099 671.267 36.6132 669.617C39.7775 667.906 42.2723 665.522 44.0978 662.467C45.9842 659.411 46.9273 655.836 46.9273 651.742C46.9273 646.058 45.0106 641.414 41.177 637.808C37.3435 634.203 32.3233 632.4 26.1166 632.4H-20.5705V672.092Z" fill="#CCC5B9"/>
          <path d="M-37 278V146H26.2992C34.1488 146 40.8423 147.619 46.3797 150.858C51.9779 154.097 56.2374 158.375 59.1582 163.692C62.1399 168.947 63.6307 174.631 63.6307 180.742C63.6307 187.892 61.8052 194.156 58.1542 199.533C54.5032 204.911 49.5743 208.608 43.3676 210.625L43.1851 206.133C51.6432 208.394 53.2864 212.55 57.9718 218.6C62.6573 224.65 65 231.861 65 240.233C65 247.933 63.4179 254.594 60.2537 260.217C57.1503 265.839 52.6474 270.208 46.745 273.325C40.8425 276.442 38.8951 278 30.8629 278H-37ZM-20.5705 262.417H27.7596C32.6276 262.417 36.9784 261.531 40.8119 259.758C44.6455 257.925 47.6575 255.358 49.8481 252.058C52.0996 248.758 53.2253 244.786 53.2253 240.142C53.2253 235.681 52.2213 231.678 50.2133 228.133C48.266 224.589 45.4974 221.778 41.9072 219.7C38.3779 217.561 34.2705 216.492 29.5851 216.492H-20.5705V262.417ZM-20.5705 201.092H26.1166C30.011 201.092 33.5099 200.267 36.6132 198.617C39.7775 196.906 42.2723 194.522 44.0978 191.467C45.9842 188.411 46.9273 184.836 46.9273 180.742C46.9273 175.058 45.0106 170.414 41.177 166.808C37.3435 163.203 32.3233 161.4 26.1166 161.4H-20.5705V201.092Z" fill="#CCC5B9"/>
        </svg>
      </div>

      <div className={styles['hero-middle-section']}>

        <div className={styles['header-grid']}>
          <svg width="96" height="166" viewBox="0 0 96 166" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="32" height="166" fill="#252422"/>
            <rect x="32" width="32" height="166" fill="#DC977A"/>
            <rect x="64" width="32" height="166" fill="#403D39"/>
          </svg>

          <h1 className={styles['home-urbane-text']}>URBANE</h1>

          <svg width="96" height="166" viewBox="0 0 96 166" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="32" height="166" fill="#403D39"/>
            <rect x="32" width="32" height="166" fill="#80BCBD"/>
            <rect x="64" width="32" height="166" fill="#252422"/>
          </svg>
        </div>


        <div className={styles['location-outer']}>
          <input type="text" placeholder={'Enter a city to get started'} />
          <div className={styles['search-results-wrap']}>
            <div className={styles['search-results-grid']}>
              <span className={styles['search-result']}>Manchester City</span>
              <span className={styles['search-result']}>Shoreview, MN</span>
            </div>
          </div>

          <button ref={detectRef} className={styles['detect-button']}>Detect my current location</button>
        </div>
      </div>
      
      <div className={styles['hero-logo']}>
      </div>
    </div>
  )
}

